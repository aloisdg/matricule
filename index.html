<!DOCTYPE html>
<html>

  <head>
    <title>Matricule</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css">
  </head>

    <!--https://www.debuggex.com/r/34Ab7ZYJtgKX-wEn-->
  <body>
    <h1>
      Bonjour citoyens du Complex Alpha !
    </h1>
    <p>
      Bienvenue sur le formulaire de vérification de matricule. Faites attention les traîtres se cachent partout ! Ne faites confiance à personne ! Gardez votre laser à portée de la main ! 
    </p>
      <!-- Si tu regardes ceci, c'est que le code t'intéresse. Viens me filer un coup de main ! -->
      <!-- https://github.com/aloisdg/matricule -->
      <form>
        <h2>Et vous ?</h2>
         <label for="matricule">Matricule:
        <input type="text" id="matricule" name="matricule" required autofocus inputmode="verbatim" maxlength="14" placeholder="Alo-I-SDG-1" autocomplete="username" pattern="[A-Z][a-z]{1,4}-(Ir|[ROJVBIU]|Vi)-[A-Z]{3}-[1-6]" list="matricules">
         <datalist id="matricules">
          <option value="Beg-O-NIA-3">Beg-O-NIA-3</option>
          <option value="James-B-OND-1">James-B-OND-1</option>
          <option value="Anna-R-CHI-2">Anna-R-CHI-2</option>
          <option value="Comm-U-NIST-4">Comm-U-NIST-4</option>
        </datalist>
 </label>
        <span>&nbsp;</span>
  </form>
  <h2>Honnêtes Citoyens:</h2>
      <p>
        Beg-O-NIA-3, Bo-U-DHA-6, James-B-OND-1, Ram-B-EAU-3, Anna-R-CHI-2, Edel-V-EIS-2
      </p>
      <h2>Honteux Traitres:</h2>
      <p>
        Trah-I-SON-7, Comm-U-NIST-4, Mu-T-ANT-5, Inso-u-mis-2
      </p>
      <hr />
      <aside>
        <marquee>
          La tradition de Paranoïa veut que les noms ainsi obtenus soient des jeux de mots lamentables. Soyez cool et respectez là ;)
          </marquee>
      </aside>
      <script>

// http://stackoverflow.com/a/42460776/1248177
// http://stackoverflow.com/questions/8486099/how-do-i-parse-a-url-query-parameters-in-javascript
// http://codereview.stackexchange.com/questions/9574/faster-and-cleaner-way-to-parse-parameters-from-url-in-javascript-jquery
      function getJsonFromUrl() {
        return Object.assign(...location.search.substr(1).split("&").map(x => {
          [key, value] = x.split("=")
          return { [key]: decodeURIComponent(value) }
        }))
      }

      function setPattern(pattern) {
        document.querySelector('#matricule').setAttribute("pattern", pattern)
      }

      function useParams(params) {
        if (!params)
          return

        if (params['pattern'])
          setPattern(params['pattern'])
      }

    useParams(getJsonFromUrl())
      </script>
  </body>
</html>